(function(b,a){if(typeof define==="function"&&define.amd){define(["vendor/zepto.min"],a);}else{b.TokenInput=a(b.Zepto);}})(this,function(d){var a={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188},b={values:[]},c=function(f){var e=function(){var h=d(this),l=d('<ul class="token-input"><li class="input input-ing"></li></ul>'),i=d('<div class="autocomplete"></div>'),k=null,g=function(){h.attr("autocomplete","off");
h.before(l);l.find("li.input-ing").append(h);l.after(i);k=h.clone();l.bind("click",n);l.on("keydown","input",m);},m=function(q){var o=this,p=d(this).val();
switch(q.keyCode){case a.ENTER:case a.TAB:case a.NUMPAD_ENTER:case a.COMMA:q.preventDefault();if(p===""){return;}d(this).attr("readonly","readonly");d(this).after("<p>"+p+"</p>");
d(this).next().after('<span class="close"></span>');d(this).parent().addClass("input-token").removeClass("input-ing");n();break;default:setTimeout(function(){j.apply(o,arguments);
},0);break;}},j=function(t){var s=d(this).val(),r=new RegExp(s,"i"),o=[];if(s===""){i.removeClass("active");i.empty();return;}for(var q=f.values.length;
q--;){if(r.test(f.values[q]["name"])){o.push(f.values[q]);}}if(o.length){i.addClass("active");var p="";console.log(o);for(var q=o.length;q--;){p+='<div data-value="'+o[q].id+'">'+o[q].name+"</div>";
}i.html(p);i.children().eq(0).addClass("hover");}else{i.removeClass("active");i.empty();}},n=function(){var o=l.find("li.input-ing");if(o.length===0){o=d('<li class="input input-ing"></li>');
o.append(k.clone());l.append(o);}o.find("input").focus();};g();};d.each(this,function(){e.apply(this);});return{add:function(g){f.values=d.extend(f.values,g);
},remove:function(g){},clear:function(){f.values=[];},get:function(){return f.values;}};};return{run:function(e){var f=d.extend({},b),g;if(typeof e==="string"){g=e;
}else{f=d.extend(f,e);g=f.target;}delete f.target;return c.call(document.querySelectorAll(g),f);}};});